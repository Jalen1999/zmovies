<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Download the ZMovies</title>
    <link rel="stylesheet" href="swiper.css">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            list-style: none;
            text-decoration: none;
            overflow-x: hidden;
            /*Disable left and right sliding*/
        }

        .container {
            width: 100%;
        }

        .container img {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }

        .container .top {
            height: 20%;
        }

        .container .middle {
            height: 30%;
        }

        .container .bottom {
            height: 50%;
        }
    </style>
</head>

<body class="download">
    <div class="container">
        <div class="top">
            <img src="top_free_1334.jpg" alt="">
        </div>
        <div class="swiper-container middle">
            <!-- Image list container -->
            <div class="swiper-wrapper">
                <img class="swiper-slide" src="banner1.jpg">
                <img class="swiper-slide" src="banner2.jpg">
                <img class="swiper-slide" src="banner3.jpg">
                <img class="swiper-slide" src="banner4.jpg">
                <img class="swiper-slide" src="banner5.jpg">
            </div>
        </div>
        <div class="bottom">
            <img src="bottom_1334.jpg" alt="">
        </div>
    </div>
    <script src="swiper.min.js"></script>
    <script src="jquery-1.4.1.min.js"></script>
    <script>
        var swiper = new Swiper('.swiper-container', {
            autoplay: {
                disableOnInteraction: false, // After user operation, automatic switching will not stop
            }, // Autoplay
            loop: true, // Loop,
        });

        $(document).ready(function () {
            let height = document.body.offsetHeight
            if (height > 800) {
                $("#img-bottom").attr('src', 'bottom_1628.jpg');
            }
        });

        $(".download").click(function () {
            let params = GetRequest();
            let invited_by = params.invited_by ?? '';
            let vod_id = params.vod_id ?? '';
            let invite_id = '';
            if (invited_by) {
                invite_id = '#invited#' + invited_by + '#@#'
                copyText(invite_id)
            }
            if (vod_id) {
                invite_id = '#invited#' + vod_id + '#@#'
                copyText(invite_id)
            }
            location.href = 'https://zmovies-api.kjaydev.xyz/download/ZMovies.apk';
        });
        const copyText = (text) => {
            // Numbers do not have .length and cannot be used to execute selectText. They need to be converted to strings.
            const textString = text.toString();
            let input = document.querySelector('#copy-input');
            if (!input) {
                input = document.createElement('input');
                input.id = "copy-input";
                input.readOnly = "readOnly";        // Prevent iOS focus from triggering keyboard events
                input.style.position = "absolute";
                input.style.left = "-1000px";
                input.style.zIndex = "-1000";
                document.body.appendChild(input)
            }
            input.value = textString;
            // ios must select the text first and does not support input.select();
            selectText(input, 0, textString.length);
            if (document.execCommand('copy')) {
                document.execCommand('copy');
                //alert('Copied to clipboard');
            } else {
                console.log('Incompatible');
            }
            input.blur();
            // The select() method that comes with input cannot be selected on the Apple side, so you need to write a similar method yourself
            // Select text. createTextRange(setSelectionRange) is the input method
            function selectText(textbox, startIndex, stopIndex) {
                if (textbox.createTextRange) {//ie
                    const range = textbox.createTextRange();
                    range.collapse(true);
                    range.moveStart('character', startIndex);//Start cursor
                    range.moveEnd('character', stopIndex - startIndex);//End cursor
                    range.select();//Not compatible with Apple
                } else {//firefox/chrome
                    textbox.setSelectionRange(startIndex, stopIndex);
                    textbox.focus();
                }
            }
        };


        function GetRequest() {
            var url = location.search; //Get the string after the "?" character in the URL
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }
        function sleep(time) {
            var timeStamp = new Date().getTime();
            var endTime = timeStamp + time;
            while (true) {
                if (new Date().getTime() > endTime) {
                    return;
                }
            }
        }
    </script>
</body>

</html>